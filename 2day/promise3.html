<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>

<body>
    <div>
        <div>
            <span>아이디: </span>
            <input id="inputId" type="text">
        </div>
        <div>
            <span>비밀번호: </span>
            <input id="inputPwd" type="text">
        </div>
        <button id="outputButton" onclick="fnLogin();">로그인</button>
    </div>
</body>

</html>
<script>
    class Login {
        //클래스 메서드생성
        checkUser(id, pwd) {
            return new Promise((resolve, reject) => {
                if (
                    (id == 'test123' && pwd == '123')
                    ||
                    (id == 'admin' && pwd == 'admin')
                ) {
                    resolve(id);
                } else {
                    reject(new Error("에러발생"));
                }
            })
        }
        getStatus(id) {
            return new Promise((resolve, reject) => {
                if (id == 'admin') {
                    resolve("관리자");
                } else {
                    if (id == undefined) {
                        reject(new Error("에러발생!"));
                    } else {
                        resolve("일반유저");
                    }
                }
            })  
        }
    }
    function fnLogin() {
        let userId = document.getElementById("inputId").value;
        let pwd = document.getElementById("inputPwd").value;

        let login = new Login();
        login
            .checkUser(userId, pwd)
            .then(id => {alert(id + "ㅎㅇ"); 
                return login.getStatus(id);
            })
            .then(status => { alert(status + " 입니다")})
            .catch(error => { console.log(error) })
    }    
</script>